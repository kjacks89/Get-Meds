<!DOCTYPE html>
<html>
<head>
  <meta http0-equiv='X-UA-Compatible' content='IE=edge' />
  <title>Medication Orders</title>
</head>

<body>
<h2>List of Medication Orders:</h2>
<p id="orders"></p>
<script>
var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function() {
  if (this.readyState == 4 && this.status == 200) {
    var myObj = JSON.parse(this.responseText);
    for(var i = 0; i < myObj.entry.length; i++){
        document.getElementById("orders").innerHTML += myObj.entry[i].resource.text.div;
        document.getElementById("orders").innerHTML += "<br>"; 
    }
  }
};
xmlhttp.open("GET", "https://fhir-open.sandboxcerner.com/dstu2/0b8a0111-e8e6-4c26-a91c-5069cbc6b1ca/MedicationOrder?patient=2744010&status=active", true);
xmlhttp.setRequestHeader("Accept", "application/json+fhir", true)
xmlhttp.send();
</script>
  <!-- Application-level javascript-->
    <script src='./src/js/example-smart-app.js'></script>

    <!-- FHIR Client JS Library -->
    <script src='./lib/js/fhir-client-v0.1.12.js'></script>

    <!-- Prevent session bleed caused by single threaded embedded browser and sessionStorage API -->
    <!-- https://github.com/cerner/fhir-client-cerner-additions -->
    <script src='./lib/js/fhir-client-cerner-additions-1.0.0.js'></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>
      extractData().then(
        //Display 'Failed to call FHIR Service' if extractData failed
        function() {
          $('#loading').hide();
          $('#errors').html('<p> Failed to call FHIR Service </p>');
        }
      );
    </script>
</body>
</html>
